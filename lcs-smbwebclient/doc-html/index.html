<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Modules LCS Smbwebclient</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <style type="text/css" media="all">@import "../../c/c.css";</style>
</head>
<body>
<h1>Documentation Module LCS Smbwebclient</h1>
<h2>Versions :</h2>
<ul>
    <li>Paquet module : 2.4</li>
    <li>Smbweclient : 2.9</li>
</ul>
<h2>Dernières modifications :</h2>
    <li>Version 2.4.6.1
    <ul>
        <li>Ajout dans la documenation, d'une section concernant la <a href="#restrict">restriction d'accès</a>.</li>
    </ul>
    </li>
    <li>Version 2.4.1
    <ul>
        <li>Prise en compte du droit <i class="emphasis">smbweb_is_open</i> et interdiction d'accès si le mot de passe est toujours celui par défaut.Merci à Stéphane Boireau pour cette contribution.</li>
    </ul>
    </li>
    <li>Version 1.3
    <ul>
        <li>Possibilité de n'autoriser <a href="#rep">l'affichage que de certains répertoires</a></li>
    </ul>
    </li>
    <li>Version 1.2
    <ul>
        <li>Mise en majuscule des variables <i class="emphasis">se3domain</i> et <i class="emphasis">se3netbios</i></li>
        <li>Mise en commentaire de l'option "Télécharger le dossier (comprésser)"</li>
    </ul>
    </li>
    <li>Version 1.1
    <ul>
        <li>Correction variable <i class="emphasis">cfgDefaultServer</i> positionnée avec la variable <i class="emphasis">se3netbios</i></li>
    </ul>
    </li>
</ul>
<h3>Qu'est ce que <i class="emphasis">smbwebclient</i> :</h3>
<p><i class="emphasis">SMB Web Client</i> est un script écrit par <strong><em>Victor M. Varela</em></strong> adapté au <i class="emphasis">LCS</i>, il permet d'accéder depuis son espace perso. <i class="emphasis">LCS</i> aux partages du serveur de fichiers <i class="emphasis">SE3</i>.</p>

<h3>Pour démarrer :</h3>
<p>On vérifiera sur le serveur <i class="emphasis">SE3</i> si il est en <i class="emphasis">Samba 3</i>, la présence du fichier <tt class="filename">/etc/samba/smb_Samba.conf</tt> et la présence de la section ci-dessous dans ce même fichier.</p>
<pre class="programlisting">
[home]
        comment = Home de %u
        path = /home/%u
        read only = No
        hide files = /profile/profil/
        browseable = Yes
        root preexec = /usr/share/se3/sbin/mkhome.pl %u %m; \
                       /usr/share/se3/sbin/connexion.pl %u %m %I
</pre>
<!--p>On vérifiera que dans le menu <tt class="computeroutput">Administration > Parametres serveur</tt> que le parametre <tt class="computeroutput">se3Ip</tt> est correctement positionné car à partir de cette version, ce parametre n'est plus optionel.</p-->
<p>Pour arriver directement sur le pdc, on pourra positionner dans <tt class="computeroutput">Administration > Parametres serveur</tt> le parametre <tt class="computeroutput">se3domain</tt> comme ceci : <tt class="computeroutput">DOMAINE/NOM_NET_BIOS</tt>.</p>
<a name="restrict"></a><h3>Restriction d'accès au service <i class="emphasis">smbwebclient</i></h3>
<p>Pour accéder au service smbwebclient,</p>
<ul>
    <li>L'utilisateur doit avoir changé son mot de passe par défaut;</li>
    <li>Il doit appartenir à un groupe possédant le droit <tt class="computeroutput">smbweb_is_open</tt> ou posséder lui même ce droit.</li>
</ul>
<p>Si le droit <tt class="computeroutput">smbweb_is_open</tt> n'existe pas dans la branche Rights, celui-ci est créé à l'installation initiale ou à la mise à jour du paquet.</p>
<p>Lors de la création de ce droit, celui-ci est alimenté avec <tt class="computeroutput">admin</tt>, et les groupes <tt class="computeroutput">Administratifs, Profs et Eleves</tt>... dans le but de conserver l'usage existant dans la limite de la restriction du changement de mot de passe par défaut.</p>
<a name="rep"></a><h3>Restriction d'affichage de répertoires</h3>
<p>Le paramètre <tt class="computeroutput">shareview</tt> accessible depuis le menu <tt class="computeroutput">Administration > Parametres serveur</tt> permet de n'autoriser la visualisation que de certains répertoires du serveur de fichiers.</p>
<p>Par défaut, ce paramètre est positionné avec <tt class="computeroutput">Docs/Classes/Progs</tt>.</p>
<p>Ce qui autorise la visualisation dans l'arborescence que des répertoires 
<tt class="computeroutput">Docs</tt> 
<tt class="computeroutput">Classes</tt> 
<tt class="computeroutput">Progs</tt> 
l'autorisation de l'accès au répertoire <tt class="computeroutput">homes</tt> de l'utilisateur est implicite, le séparateur est <b>/</b>.
</p>
</body>
</html>
